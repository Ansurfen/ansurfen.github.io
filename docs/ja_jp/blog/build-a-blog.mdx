---
pubDatetime: 2025-05-21
title: Astro を使って個人ブログを構築する
description: 🌟 ブログフレームワーク選定の過程を記録
category: 随筆
series: 学習シェア
tags:
    - 学習
    - ブログ
    - VuePress
    - Hugo
    - Hexo
    - Astro
    - WorkFlow
---

## 🛠️ フレームワークの選定

1. VuePress → ドキュメント向けで、ブログ機能は限定的 📄  
2. Hugo → 設定が複雑（extended版はGCCが必要）、破壊的な更新が多い ⚠️  
3. Hexo → Node.jsエコシステムに親和性があるが、テーマの選択肢が限られている 🌀  
4. Astro → 最終的な選択！ ✨

Astroは設定が簡単でUIの柔軟性が高いが、そのレンダリングモデルに対する理解が必要。

### 💡 Astroのレンダリングモデル解説：
Astroは独自の「静的生成＋オンデマンドハイドレーション」アプローチを採用している。すべてのコンポーネントはデフォルトでサーバーサイドレンダリングされ、静的HTMLとして出力される。必要な部分だけをクライアント側でインタラクティブにすることができる、いわゆる「アイランドアーキテクチャ」で、読み込み速度とインタラクティブ性を両立させている。

実際の開発では、TypeScript＋Markdownを組み合わせて使う。スタイルが必要であれば、自分でCSSを記述し、Markdownコンテンツにそれを適用する必要がある。

この柔軟性のために、ただのmdファイルではなく、AstroファイルでUIを制御する必要があるが、コードを書くことに慣れている人にはこれが心地よいと感じるはずだ。私はブログのユーティリティ関数に対してVitestで単体テストを書くことすらした。

## 🎢 開発の旅

最終的にある程度満足できるブログを構築するのに2日間を費やした。

最初はVuePressで作ろうとしたが、テーマを探しているうちに、これはブログではなくドキュメント用だと気づいた。まるでドライバーでネジを締めるようなもので、使えるけど最適じゃない。

次にHugoを試したが、設定が複雑で、気に入ったテーマはextended版が必要で、それにはGCCが必要だった。環境を整えても、更新が破壊的で、選んだテンプレートが実行できなかった。

次にHexoを使ったが、Node.jsエコシステムなので扱いやすかった一方、良いテンプレートがなかった。

AIに相談したところ、Astroフレームワークを紹介された。無料で使えるテンプレートを大量に見て、ようやく納得できるものを見つけた。

最初は感動したが、実装はそれほど簡単ではなかった。最初は`---`を`<script>`と同じようなものだと思っていたが、これはサーバーとクライアントコードの分離記号で、サーバーコードはビルド時に実行され、クライアントコードはブラウザで実行されることが後でわかった。

多言語対応部分も直感的ではなく、公式のデモでは全コンテンツをen_us/zh_cnディレクトリに分けるのではなく、コンテンツディレクトリを言語ごとに分けていた。いろいろ妥協してようやく自分なりの形に落ち着いた。

## 🚀 デプロイ経験

GitHub Workflow＋Pagesは開発者にとって非常に便利なものだが、yamlスクリプトを書くときの不自由さも感じた。

最終的に個人ブログ＋metricsをデプロイするために、20回以上コミットを繰り返してようやく構築できた。結果としてmetricsを別リポジトリに移動させた。

私の要件は少し特殊で、GitHub Metricsの画像を生成し、それをブログで参照し、両方を同一URLでデプロイしたかった。

最初はAIに生成させた2つのyamlを同時に動かしたら、お互い上書きしてしまった。次に統合させようとしたが、filenameフィールドを宣言すると、なぜかmetrics.svgが正常に生成されなくなった。

最終的にそれぞれ別のリポジトリに分けて問題を回避した。解決したので、まあ結果オーライだと思う。
